<%page args="form, operators" />
<%namespace file="/common/helpers.html" name="h"/>
<%namespace file="/common/modal.html" import="delete_modal" />

<form>
  <div>
    <%include file="/operators/_action_button.html" args="order=['new', 'role', 'permission']" />
  </div>
  <table class="table fullwidth checkboxed_table" style="margin-top: 10px;">
    <thead>
    <tr>
      <th class="minwidth">ID</th>
      <th>ログインID</th>
      <th>名前</th>
      <th>会社名</th>
      <th>ロール</th>
      <th>操作</th>
    </tr>
    </thead>
    <tbody>
    % for operator in operators.items:
    <tr>
      <td><a href="${request.route_path('operators.show', operator_id=operator.id)}">${operator.id}</a></td>
      <td><a href="${request.route_path('operators.show', operator_id=operator.id)}">${operator.auth.login_id}</a></td>
      <td><a href="${request.route_path('operators.show', operator_id=operator.id)}">${operator.name}</a></td>
      <td><a href="${request.route_path('organizations.show', organization_id=operator.organization.id)}">${operator.organization.name}</a></td>
      <td>
        % for role in operator.roles:
        <ul>
          <li>${role.name}</li>
        </ul>
        % endfor
      </td>
      <td>
        <%include file="/operators/_action_button.html" args="operator=operator, order=['edit', 'delete']" />
      </td>
    </tr>
    % endfor
    </tbody>
  </table>
  ${h.pager(operators)}
</form>

${delete_modal()}
