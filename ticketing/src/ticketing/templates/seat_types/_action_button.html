<%page args="performance" />
<%namespace file="/common/modal.html" import="delete_modal" />

<script type="text/javascript">
  function delete_seat_type() {
    var id = get_id('seat_type_id');
    if (!id) return;
    $('#modal-delete #delete').attr('href', '/seat_types/delete/' + id);
    $('#modal-delete #message').text("${u'選択した席種を削除します。よろしいですか？'}");
    $('#modal-delete').modal('toggle');
  }
  function readjustMap() {
    var n = $("#venue-map");
    n.height($(window).height() - 250);
    var width = n.width();
    var height = n.height();
    var toolbar = n.find(".ui-toolbar");
    toolbar.width(width - 6);
    var data = n.data('venue_editor');
    if (data && data.manager) {
      data.manager.drawable.viewportSize({
        width: width,
        height: height - toolbar[0].offsetHeight
      });
    }
  }
  $(window).resize(readjustMap);
  $(document).ready(readjustMap);
</script>

<div class="tab-pane">
  <ul class="nav nav-pills">
    <li class="dropdown" id="seat-type-menu">
      <a class="dropdown-toggle" data-toggle="dropdown" href="#seat-type-menu">
        席種<b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li>
          <a href="#new-seat-type[${performance.id}]">
            <i class="icon-plus"></i> 新規
          </a>
        </li>
        <li>
          <a href="javascript:delete_seat_type()" data-controls-modal="modal-delete" data-backdrop="true" data-keyboard="true">
            <i class="icon-minus"></i> 削除
          </a>
        </li>
        <li class="divider"></li>
      </ul>
    </li>
    <li class="dropdown" id="venue-menu">
      <a class="dropdown-toggle" data-toggle="dropdown" href="#venue-menu">
        会場図<b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li>
          <i class="icon-plus"></i> 保存
        </li>
        <li class="divider"></li>
      </ul>
    </li>
  </ul>
</div>

${delete_modal()}