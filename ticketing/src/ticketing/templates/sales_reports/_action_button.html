<%page args="order=None, event=None, performance=None" />
<%namespace file="/common/helpers.html" name="ch" />
<%namespace file="/common/modal.html" import="delete_modal" />

<script type="text/javascript">
  function new_sales_reports_mail() {
    var modal = $('#modal-sales_reports_mail');
    reset_form(modal, '#event_id, #performance_id');
    modal.modal('toggle');
  }
  function delete_sales_reports_mail() {
    var id = get_id('sales_reports_mail_id');
    if (!id) return;
    var modal = $('#modal-delete');
    modal.find('#delete').attr('href', '/events/sales_reports/mail/delete/' + id);
    modal.find('#message').text('選択した送信先アドレスを削除します。よろしいですか？');
    modal.modal('toggle');
  }
  function save_sales_reports_mail() {
    var modal = '#modal-sales_reports_mail';
    var form = '#sales_reports_mail-form';
    var id = $(modal).find('#id').val();
    var url = id ? '/events/sales_reports/mail/edit/' + id : '/events/sales_reports/mail/new/';
    post_modal_form(modal, form, url);
  }
</script>

<%
  actions = {
    'new':dict(
      label=u'新規',
      url='javascript:new_sales_reports_mail();',
      icon='icon-plus',
    ),
    'delete':dict(
      label=u'削除',
      url='javascript:delete_sales_reports_mail();',
      icon='icon-minus',
    ),
  }
  order = iter(order or ['new', 'delete'])
%>
${HH.action_button(actions, order)}

${delete_modal()}
