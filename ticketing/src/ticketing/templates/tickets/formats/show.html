<%inherit file="../../layout_2cols.html" />
<%namespace file="/common/helpers.html" import="breadcrumbs,pager,flash_messages"/>
<div class="breadcrumbs">
${breadcrumbs(
  names=[u'トップ', u'チケット様式', format.name],
  urls=[request.route_path('index'), request.route_path('tickets.formats.index')]
)}
</div>
<div class="page-header">
  <h1>チケット様式</h1>
</div>
<div class="content">
  ${flash_messages(request)}
</div>

<div class="row-fluid">
  <div class="span6">
    <h3>詳細</h3>
    <table class="table table-striped table-bordered">
      <tbody>
        <tr>
          <th class="span2">名称</th>
          <td class="span3">${format.name}</td>
        </tr>
        <tr>
          <th>サイズ</th>
          <td>
            ${h.format_size(h.extract_paper_size(format))}
          </td>
        </tr>
        <tr>
          <th>配送方法</th>
          <td>
			${u' / '.join(dm.name for dm in format.delivery_methods)}
		  </td>
        </tr>
        <tr>
          <th>ミシン目</th>
          <td>
            <% ps = h.extract_perforations(format) %>
            垂直方向:${u", ".join(ps["vertical"])}
            水平方向:${u", ".join(ps["horizontal"])}
          </td>
        </tr>
        <tr>
          <th>印刷領域</th>
          <td>
            <% areas = h.extract_printable_areas(format) %>
            <ul>
            %for area in areas:
              <li>x:${area["x"]}, y:${area["y"]}, 幅:${area["width"]}, 高さ:${area["height"]}</li>
            %endfor
            </ul>
          </td>
        </tr>
        <tr>
          <th class="span2">作成日時</th>
          <td class="span3">${format.created_at}</td>
        </tr>
        <tr>
          <th class="span2">更新日時</th>
          <td class="span3">${format.updated_at}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="span6"></div>
</div>

<div class="row-fluid">
  <div class="btn-group">
    <a href="${request.route_path("tickets.formats.edit",id=format.id)}" class="btn">
      <i class="icon-pencil"></i> 編集
    </a>
        <button class="btn dropdown-toggle" data-toggle="dropdown">
          <span class="caret"></span>
        </button>
        <ul class="dropdown-menu">
          <li>
            <a href="#deleteModal" data-toggle="modal">
              <i class="icon-minus"></i> 削除
            </a>
          </li>
          <li>
            <a href="${request.route_path("tickets.formats.new",_query=dict(id=format.id))}">
              <i class="icon-plus"></i> コピーして新規作成
            </a>
          </li>
        </ul>
  </div>
</div>

<div class="modal hide" id="deleteModal">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">×</button>
    <h3>確認</h3>
  </div>
  <div class="modal-body">
    このチケット様式を削除します。よろしいですか？
  </div>
  <div class="modal-footer">
    <a href="#" class="btn" data-dismiss="modal">キャンセル</a>
    <form action="${request.route_path("tickets.formats.delete",id=format.id)}" method="POST">
      <button type="submit" class="btn">削除する</button>
    </form>
  </div>
</div>
