<%inherit file="../layout.html" />                                                                     
<%namespace file="/common/helpers.html" import="validate_errors" />
<%namespace file="/common/helpers.html" import="alert_message" />
<%namespace file="/common/helpers.html" import="flash_messages" />

<%def name="form_item(key, help='')">                                                                  
  <div class="control-group ${'error' if form[key].errors else ''}">
    <label class="control-label">${help|n} ${form[key].label.text}</label>
    <div class="controls">
      ${form[key]}
      ${validate_errors(form[key])}                                                                    
    </div>
  </div>
</%def>

<script type="text/javascript">
  $(function() {
    $('#start_on').datepicker({showOn:'focus', dateFormat:'yy-mm-dd'});
    $('#end_on').datepicker({showOn:'focus', dateFormat:'yy-mm-dd'});
    $('#open_on').datepicker({showOn:'focus', dateFormat:'yy-mm-dd'});
  });
</script>

<div class="row-fluid">
  <%include file="_menu.html" />

  <span class="span10">
    <div class="page-header">
      <h3>パフォーマンス登録</h3>
    </div>

    <div class="content">
      ${flash_messages(request)}
      ${alert_message(form)}
    </div>

    <div class="well">
      <form class="form-horizontal" action="${request.route_path('performances.new', event_id=event.id)}" method="POST">
        <fieldset>
          ${form_item('name')}
          ${form_item('code')}
          ${form_item('open_on')}
          ${form_item('start_on')}
          ${form_item('end_on')}
          ${form_item('venue_id')}
        </fieldset>
        <div class="form-actions">
          <input class="btn btn-primary" type="submit" name="submit" value="新規登録">
        </div>
      </form>
    </div>
  </span>
</div>
