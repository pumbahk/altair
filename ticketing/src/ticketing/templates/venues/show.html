<%inherit file="/layout_2cols.html"/>
<%namespace file="/common/helpers.html" name="h" />

<div class="breadcrumbs">
  ${h.breadcrumbs(
      names=[u'トップ', u'会場', venue.name],
      urls=[request.route_path('index'), request.route_path('venues.index')]
  )}
</div>

<div class="page-header">
  <span style="float: right; margin-right: 20px;">
    <div class="btn-group">
      <a class="btn" href="/venues/edit/${venue.id}">
        <i class="icon-edit"></i>編集
      </a>
    </div>
  </span>
  <h3>${venue.name} (venue id=${venue.id})</h3>
</div>

<div class="content">
  ${h.flash_messages(request)}
</div>

<table class="table table-striped table-bordered">
<tr><th>site</th><td>${site.name} (site id=${site.id})</td></tr>
<tr><th>backend drawing</th><td><a href="${request.route_path('api.get_drawing', venue_id=venue.id)}" target="_blank">${site.drawing_url}</a>
	<a href="${request.route_path('venues.checker', venue_id=venue.id)}" target="_blank">[checker]</a>
</td></tr>
<tr><th>frontend metadata</th><td>
	% if root:
	<a href="${request.route_path('api.get_frontend', venue_id=venue.id, part=root)}" target="_blank">${site._metadata_url}</a>
	% else:
	${site._metadata_url}
	% endif
</td></tr>
</table>

<table class="table table-striped table-bordered">
<tr><th># of seats</th><td>${len(items)}</td></tr>
</table>

<table class="table table-striped table-bordered">
  <thead>
    <tr><th>連席タイプ</th><th>席数</th></tr>
  </thead>
  <tbody>
  % for adj in adjs:
    <tr><th>${adj.adj.seat_count}連</th><td>${adj.count}</td></tr>
  % endfor
  </tbody>
</table>

<style>
table.nowrap td { white-space: nowrap; }
</style>
<table class="table table-striped table-bordered nowrap">
  <thead>
  <tr>
    <!--<th class="span1"></th>-->
    <th>L0 Group ID</th>
    <th>ブロック名称</th>
    <th>L0 Row ID</th>
    <th>列名称</th>
    <th>L0 ID</th>
    <th>席名称</th>
    <th>席番号</th>
    <th>状態</th>
  </tr>
  </thead>
  <tbody>
  % for item in items:
	<tr>
	  <!--<td></td>-->
	  <td>
		% if item.seat.group_l0_id != None:
			${item.seat.group_l0_id}
		% endif
	  </td>
	  <td>
		% if item.venuearea != None:
			${item.venuearea.name}
		% endif
	  </td>
	  <td>
		% if item.seat.row_l0_id != None:
			${item.seat.row_l0_id}
		% endif
	  </td>
	  <td>${item.row.value}</td>
      <td>${item.seat.l0_id}</td>
	  <td>${item.seat.name}</td>
      <td>
        % if item.seat.seat_no != None:
			${item.seat.seat_no}
		% endif
	  </td>
	  <td>
		% if item.status:
			${item.status.status}
		% endif
	  </td>
	</tr>
  % endfor
  </tbody>
</table>
