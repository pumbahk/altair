<%page args="form, action='#'" />
<%namespace file="/common/helpers.html" name="ch" />

<script src="${request.static_url('altair.app.ticketing:static/js/jquery.chosen.js')}"></script>
<link rel="stylesheet" type="text/css" href="${request.static_url('altair.app.ticketing:static/css/chosen.css')}" />

<form class="form-horizontal" action="${action}" method="POST">
  <div class="control-group ${u'error' if form.recipients.errors else u''}">
    <label class="control-label">${form.recipients.label.text}</label>
    <div class="controls">
      ${form.recipients(style="width:300px", size=4, multiple="")}
      ${ch.validate_errors(form.recipients)}
    </div>
  </div>
  <script type="text/javascript">
    $("form select[name='recipients']").chosen();
  </script>
  <div class="control-group">
    <label class="control-label">送信先追加</label>
    <a class="plusone btn btn-small pull-right"><i class="icon-plus"></i></a>
    <div class="controls new_recipient">
      ${form.name(style="width:120px", placeholder=form.name.label.text)}
      ${form.email(style="width:140px", placeholder=form.email.label.text)}
    </div>
    <script>
      var target = $('.new_recipient');
      var target_parent = target.parent();
      $('.plusone').click(function(){
        var target_clone = target.clone();
        target_clone.find('input').val('');
        target_parent.append(target_clone);
      });
    </script>
  </div>
  ${ch.form_item(form.frequency)}
  <div class="frequency-weekly">
  ${ch.form_item(form.day_of_week)}
  </div>
  ${ch.form_item(form.period)}
  <div class="control-group">
    <label class="required control-label">${form.report_hour.label.text}</label>
    <div class="controls">
      ${form.report_hour(style="width:60px;")} 時 ${form.report_minute(style="width:60px;")} 分
      ${ch.validate_errors(form.report_hour)}
      ${ch.validate_errors(form.report_minute)}
    </div>
  </div>
  ${ch.form_item(form.report_type)}
  ${ch.form_item(form.start_on)}
  ${ch.form_item(form.end_on)}
  ${ch.form_item(form.id)}
  ${ch.form_item(form.event_id)}
  ${ch.form_item(form.performance_id)}
</form>
