<%inherit file="altair.app.ticketing:templates/layout_2cols.html" />
<%namespace file="altair.app.ticketing:templates/common/helpers.html" name="ch" />
<% from altair.app.ticketing.cart.models import CartSetting %>
<table class="table">
  <thead>
    <tr>
      <th>${HH.label_text_for(CartSetting.name)}</th>
      <th>${HH.label_text_for(CartSetting.type)}</th>
      <th>関連するイベント</th>
    </tr>
  </thead>
  <tbody>
    % for item in items:
    <tr>
      <td><a href="${request.route_path('cart_setting.edit', cart_setting_id=item['cart_setting'].id)}">${item['cart_setting'].name or u'(名称なし)'}</a></td>
      <td>${view.cart_setting_type(item['cart_setting'])}</td>
      <td>
        <ul>
        % for event in item['relevant_events']:
          <li><a href="${request.route_path('events.show', event_id=event.id)}">${event.title}</a></li>
        % endfor
        </ul>
        % if item['relevant_events_count'] > len(item['relevant_events']):
          (他${item['relevant_events_count'] - len(item['relevant_events'])}件)
        % endif
      </td>
    </tr>
    % endfor
  </tbody>
</table>
