<%inherit file="./base.html"/>
<%namespace file="tags_smartphone.html" name="m" />

<%block name="javascript">
<script type="text/javascript" src="${request.static_url('altair.app.ticketing.cart:static/js/disable_on_submit.js')}"></script>
<script type="text/javascript">
  $(function() {
    $('form').disableOnSubmit('input[type=submit]');
  });
</script>
</%block>

<%block name="css">
<style type="text/css">
  .settlementPayInputInner dd {
    margin-left: 36px;
  }
  #btn-next {
    border: 0;
    width: 226px;
    height: 46px;
    background: url("${request.static_url('altair.app.ticketing.cart:static/img/settlement/btn_next.gif')}") left top no-repeat;
  }
  .error-list {
    color: #ff0000;
  }
  .error {
    color: #ff0000;
  }
  .dispBox {
    margin-right: 20px
  }
</style>
</%block>

${h.get_nickname(request)}
%if request.session.peek_flash():
  %for message in request.session.pop_flash():
     <table cellpadding="0" cellspacing="0" class="formcinqreves">
     <tr><td colspan="2" style="text-align:left;"><div class="error">${message}</div></td></tr>
     </table>
  %endfor
%endif

<form id="form1" name="form1" method="post" action="${request.url}">
  ${form.csrf_token()}
  <div class="settlementBox">
    <div class="settlementBoxInner">
      <!-- カード情報 -->
        <dt class="cartPayment">クレジットカードでお支払い</dt>
          <div class="settlementPayInput">
            <div class="settlementPayInputInner">
                <dl class="dispBox">
                  <dt>
                    <%m:header>カード番号(半角数字)</%m:header>
                  </dt>
                  <dd>
                    <input name="card_number" type="text" id="textfield" length="16" placeholder="1234123412341234"/>
                    16桁
                    ${h.error_list(request, form, 'card_number')}
                  </dd>
                </dl>
                <dl class="dispBox">
                  <dt>
                    <%m:header>有効期限</%m:header>
                  </dt>
                  <dd>
                      <select name="exp_month" id="select">
                        <option value="01">1</option>
                        <option value="02">2</option>
                        <option value="03">3</option>
                        <option value="04">4</option>
                        <option value="05">5</option>
                        <option value="06">6</option>
                        <option value="07">7</option>
                        <option value="08">8</option>
                        <option value="09">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                      </select>
                      ${h.error_list(request, form, 'exp_month')}
                      月　
                      <!-- TODO: 現在年から算出する-->
                      <select name="exp_year" id="select2">
                        <option value="12">2012</option>
                        <option value="13">2013</option>
                        <option value="14">2014</option>
                        <option value="15">2015</option>
                        <option value="16">2016</option>
                        <option value="17">2017</option>
                        <option value="18">2018</option>
                        <option value="19">2019</option>
                        <option value="20">2020</option>
                      </select>
                      年
                      ${h.error_list(request, form, 'exp_year')}
                  </dd>
                </dl>
                <dl class="dispBox">
                  <dt>
                    <%m:header>名義人(半角ローマ字)</%m:header>
                  </dt>
                  <dd>
                    <input name="card_holder_name" type="text" id="textfield5" size="50" placeholder="YAMADA TARO"/>
                    ${h.error_list(request, form, 'card_holder_name')}
                  </dd>
                </dl>
                <dl class="dispBox">
                  <dt>
                    <%m:header>セキュリティコード(半角)</%m:header>
                  </dt>
                  <dd>
                    <input name="secure_code" type="text" id="textfield6" size="5"/>
                    ${h.error_list(request, form, 'secure_code')}
                  </dd>
                </dl>
            </div>
          </div>

          <dl class="dispBox">
           <dd>
              <p>セキュリティコードは、MasterCard、VisaまたはJCBでは、カード裏面の署名欄に印刷されている下3桁の数字です。<br/>
                American Expressでは、カードの表に印刷されている4桁の数字です。
              </p>

              <p>
                ブラウザの「戻る」ボタンを使用するとエラーになります。前ページに戻る場合は画面内に表示されているボタンを使用して下さい。なお、ページによってはブラウザの「更新」ボタンを使用するとエラーになる場合があります。
              </p>

          <p>
            予約受付完了と同時に決済され、即時予約確定となります。
            支払回数は≪1回払い≫のみのお取扱いとなります。
            以下のクレジットカードがご利用できます。
          </p>
          <p>
            <img src="${request.static_url('altair.app.ticketing.cart:static/img/settlement/cards.gif')}" alt="cards" width="282px" height="40px"><br />
          </p>
    </div>
  </div>
  <div class="buttonbox">
    <button onclick="$('#form1').submit()" class="btn btn-primary btn-large">次へ</button>
  </div>
</form>
