## performancelist widget output template
## 

## todo service icon
## todo 販売終了した公演も表示
## serviceIconのrenderingにiconset widgetの機能を使う?
<%
from altaircms.plugins.widget.performancelist import helpers as myhelpers
%>
<div class="detailBox describeBox">
  <div class="detailBoxInner">
	<h2>公演一覧</h2>
	<!--
    <form>
      <div class="fields">
        <div class="field">
          <input type="checkbox" id="form-showUnavailablePerformances"><label for="form-showUnavailablePerformances">販売終了した公演も表示</label>
        </div>
      </div>
    </form>
	-->
	<table id="performanceList" summary="公演一覧">
    <thead>
      <tr>
        <th>公演名</th><th>公演日時</th><th>会場</th><th></th>
      </tr>
    </thead>
    <tbody>
      % for i, (venue, p) in enumerate(myhelpers.PerformanceGrid.create(performances)):
      <% performance = p.values %>
      <tr>
        <th scope="row"><span class="serial">${i+1}</span> ${performance.title}</th>
          <td>${myhelpers.performance_describe_date(performance)} ${myhelpers.performance_describe_time(performance)}</td>
          %if venue:
          <td rowspan="${venue.rowspan}" width="25%">${venue.values}</td>
          %endif
          <td width="10%"> 
            <a href="${h.link.get_purchase_page_from_performance(request, performance)}">
              <img width="80px" src="${request.static_url("altaircms:static/ticketstar/img/settlement/btn_buy.gif")}" alt="購入"/>
            </a>
          </td>
      </tr>
	  % endfor
    </tbody>
  </table>
  </div>
</div>
