<%namespace file="../components.html" name="co"/>

<style>
    .container-fluid form input {
        min-width: 0px;
    }
</style>

## N個ごとに区切られたitreratorを受け取り、divで区切って出力(scrollのため)
<%def name="render(assets)">
  %for i in xrange(max_of_pages):
  <div class="group" id="group_${i}"> 
    %if i == 0:
      ## ./fetch.htmlと同じ(todo:まとめる)
      %for asset in assets:
        <div class="item">
        <img pk="${asset.id}" src="${h.asset.rendering_object(request,asset).thumbnail_path}"/>
        <p>title:${asset.title} width:${asset.width} height:${asset.height} </p>
        </div>
      %endfor
    %endif
  </div>
  %endfor
</%def>

<div class="title">
  <h1>画像(image)</h1>
</div>
<br/>
<div style='clear:both;' id="imgtabs">
  <div class="tabbable">
  </div>
  <ul>
    <li><a href="#image_tab">画像の選択</a></li>
    <li><a href="#setting_tab">表示設定</a></li>
  </ul>
  <div id="image_tab" style="height: 600px">

    <form id="search_form" action="${request.route_path('image_widget_search')}" method="POST" style="display: inline">
      検索文字列
      <input type="hidden" name="pk" value="${pk}"/>
      <input type="text" name="search_word" value="" style="min-width: 0px"/>
      <input type="submit" value="検索" style="width: 50px" style="min-width: 0px">
    </form>

    <form id="tag_search_form" action="${request.route_path('image_widget_tag_search')}" method="POST" style="display: inline">
      検索タグ
      <input type="hidden" name="pk" value="${pk}"/>
      <input type="text" name="tags" value="" style="min-width: 0px"/>
      <input type="submit" value="タグ検索" style="min-width: 0px">
    </form>

    <div class="scrollable" style="width: 550px">
        <div class="items">
          ${render(assets)}
        </div>
    </div>

    <br/>
    <button type="button" id="image_submit">登録</button>
    <br/>

    <link rel="stylesheet" type="text/css" href="/plugins/static/css/widget/lib/image.css">
    <!-- "previous page" action -->
    <a class="prev browse left"></a>
    <a class="next browse right"></a>
    <div class="navi"></div>



  </div>
  <div id="setting_tab">
    <table class="table">
      <tbody>
        ${co.formfield(form, "href")}
        ${co.formfield(form, "width")}
        ${co.formfield(form, "height")}
        ${co.formfield(form, "alt")}
        ${co.formfield(form, "align")}
      </tbody>
    </table>
    <button type="button" id="image_info_submit">登録</button>
  </div>
</div>
