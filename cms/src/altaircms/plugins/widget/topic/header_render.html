% if hasattr(widget, "use_newstyle"):
  % if widget.use_newstyle:
    ${render_newstyle()}
  % else:
    ${render()}
  % endif
% else:
  ${render()}
% endif

<%def name="render_newstyle()">
<div class="topic-widget">
  <div id="topics">
    <h3>トピックス</h3>
    <ul>
	  %for topic in topics:
        <% link  = h.link.get_link_from_topic(request,topic) %>
        %if link:
          <li><a href="${link}">${topic.title}</a></li>
        %else:
          ${topic.title}
        %endif
      %endfor
    </ul>
  </div>
</div>
</%def>

<%def name="render()">
<div class="topic-widget">
  <ul id="topics">
	%for topic in topics:
	  <li>
        <a href="#${topic.id}">${topic.title}</a>
    </li>
	%endfor
  </ul>
</div>
<div class="clear"></div>
</%def>

