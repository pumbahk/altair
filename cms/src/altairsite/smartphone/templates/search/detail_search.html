<%namespace file="../common/tags_smartphone.html" name="m" />

<div id="detail_search" style="background-color: pink">
    詳細検索フォーム<br/>

    <form action="${request.route_path('search_detail')}" method='GET'>
        <fieldset>
            <%m:header>フリーワード</%m:header><br/>
            ${form.word}<br/>
            % for error in form.word.errors:
                <font color="red">${error}</font><br/>
            % endfor
            ${form.cond}<br/>

            <%m:header>さらに条件を指定する</%m:header><br/>
            <%m:header>ジャンルで絞り込む</%m:header><br/>
            ${form.genre_id}

            <%m:header>開催地で絞り込む</%m:header><br/>
            <hr/>
            ${form.prefecture_hokkaido.label}${form.prefecture_hokkaido}<hr/>
            ${form.prefecture_syutoken.label}${form.prefecture_syutoken}<hr/>
            ${form.prefecture_koshinetsu.label}${form.prefecture_koshinetsu}<hr/>
            ${form.prefecture_kinki.label}${form.prefecture_kinki}<hr/>
            ${form.prefecture_chugoku.label}${form.prefecture_chugoku}<hr/>
            ${form.prefecture_kyusyu.label}${form.prefecture_kyusyu}<hr/>

            <%m:header>販売条件で絞り込む</%m:header><br/>
            ${form.sales_segment}

            <%m:header>公演日で絞り込む</%m:header><br/>
            <font color="red">${helper.disp_date_error(form)}</font><br/>
            ${form.since_year}年${form.since_month}月${form.since_day}日〜${form.year}年${form.month}月${form.day}日

            <%m:header>発売日で絞り込む</%m:header><br/>
            ${form.sale_start}日以内に受付・販売開始<br/>
            販売終了まで${form.sale_end}日<br/><br/>
            ${form.closed_perf.label}${form.closed_perf}
            ${form.canceled_perf.label}${form.canceled_perf}<br/>
            <input type="submit" value="検索"/>
        </fieldset>
    </form>
</div>

<script>
    window.onload = function(){
        addCheckBoxEventHandler("prefecture_hokkaido")
        addCheckBoxEventHandler("prefecture_syutoken")
        addCheckBoxEventHandler("prefecture_koshinetsu")
        addCheckBoxEventHandler("prefecture_kinki")
        addCheckBoxEventHandler("prefecture_chugoku")
        addCheckBoxEventHandler("prefecture_kyusyu")
    }

    function addCheckBoxEventHandler(name) {
        checkboxies = document.getElementsByName(name);
        for (var index = 0; index < checkboxies.length; index++) {
            if (checkboxies[index].value == "all_check") {
                checkboxies[index].onClick = checkedAllPrefectures(name, true);
                break;
            }
        }
    }

    function checkedAllPrefectures(name, check){
        checkboxies = document.getElementsByName(name);
        for (var index = 0; index < checkboxies.length; index++) {
            checkboxies[index].checked = check;
        }
    }
</script>